import{r as C,c as u,o as s,a as m,b as p,d as o,e as f,f as z,w as a,t as h,g as E,E as I,h as P,i as H,j as x,u as g,k as U,l as $,_ as V,F as M,m as j,n as q,v as O,p as W,q as G,s as _,x as J,y as K,z as Q,A as X,B as Y,C as T,D as B}from"./index-C86k9JzW.js";/* empty css                   *//* empty css                        *//* empty css                    */import{u as Z}from"./useAuthCheck-BYOEI1el.js";import{_ as D}from"./el-input-BtvPs5Ei.js";/* empty css                 */const ee=e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleString()}catch{return(e==null?void 0:e.toString())||"Unknown"}},te={class:"page-container"},oe={key:0,class:"page-header"},ae={key:0,class:"header-actions"},ne={class:"page-content"},se={class:"card-header"},le={class:"card-title"},re={key:0,class:"loading-container"},ie={key:1,class:"page-footer"},de={key:0,class:"about-button-container"},ce={__name:"CommonPageLayout",props:{title:{type:String,default:""},showHeader:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},cardTitle:{type:String,default:""},cardBodyStyle:{type:Object,default:()=>({padding:"20px"})},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Loading..."},empty:{type:Boolean,default:!1},emptyText:{type:String,default:"No data found"},emptyImageSize:{type:Number,default:200},items:{type:Array,default:()=>[]},showFooter:{type:Boolean,default:!1},showAboutButton:{type:Boolean,default:!1}},setup(e){const r=C(null),d=()=>{var t,i;(i=(t=r.value)==null?void 0:t.open)==null||i.call(t)};return(t,i)=>{const w=I,b=P,v=H,k=x,n=$;return s(),u(M,null,[m("div",te,[e.showHeader?(s(),u("div",oe,[f(t.$slots,"header",{},()=>[m("h1",null,h(e.title),1),e.showActions?(s(),u("div",ae,[f(t.$slots,"actions",{},void 0,!0)])):p("",!0)],!0)])):p("",!0),m("div",ne,[o(v,{class:"content-card","body-style":e.cardBodyStyle},z({default:a(()=>[e.loading?(s(),u("div",re,[o(w,{text:e.loadingText},null,8,["text"])])):!e.loading&&(e.empty||e.items.length===0)?(s(),E(b,{key:1,description:e.emptyText,"image-size":e.emptyImageSize},{default:a(()=>[f(t.$slots,"empty",{},void 0,!0)]),_:3},8,["description","image-size"])):f(t.$slots,"default",{key:2},void 0,!0)]),_:2},[e.cardTitle?{name:"header",fn:a(()=>[m("div",se,[m("span",le,h(e.cardTitle),1),f(t.$slots,"card-actions",{},void 0,!0)])]),key:"0"}:void 0]),1032,["body-style"])]),e.showFooter?(s(),u("div",ie,[f(t.$slots,"footer",{},void 0,!0)])):p("",!0)]),e.showAboutButton?(s(),u("div",de,[o(n,{type:"info",plain:"",circle:"",onClick:d,title:"About FUNERAL"},{default:a(()=>[o(k,null,{default:a(()=>[o(g(U))]),_:1})]),_:1})])):p("",!0),o(V,{ref_key:"aboutDialogRef",ref:r},null,512)],64)}}},ue=D(ce,[["__scopeId","data-v-23fe8f21"]]),fe={__name:"Home",setup(e){const r=X(),d=C([]),t=C(!1),i=async()=>{t.value=!0;try{const n=await T.getRepositories();d.value=n||[],console.log("Repositories data:",n)}catch(n){B.error("Failed to fetch repositories"),console.error("Error fetching repositories:",n)}finally{t.value=!1}},w=()=>{i()},b=n=>{const l=encodeURIComponent(n);r.push(`/repository/${l}`)},v=async n=>{try{await Y.confirm(`Are you sure you want to delete repository "${n}"?`,"Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning",confirmButtonClass:"el-button--danger"}),t.value=!0,await T.deleteRepository(n),B.success("Repository deleted successfully"),await i()}catch(l){l!=="cancel"&&B.error("Failed to delete repository")}finally{t.value=!1}},{initPage:k}=Z(r,i,{loading:t});return j(()=>{k()}),(n,l)=>{const R=x,A=$,N=G,y=J,L=W,F=O;return s(),E(ue,{title:"Repositories",loading:t.value,empty:d.value.length===0,"empty-text":"No repositories found",items:d.value,"show-about-button":!1},{actions:a(()=>[o(A,{type:"primary",onClick:w},{default:a(()=>[o(R,null,{default:a(()=>[o(g(Q))]),_:1}),l[0]||(l[0]=_(" Refresh ",-1))]),_:1})]),default:a(()=>[q((s(),E(L,{data:d.value,style:{width:"100%"},border:""},{default:a(()=>[o(y,{prop:"name",label:"Name",width:"300"},{default:a(c=>[o(N,{type:"primary",onClick:S=>b(c.row.name)},{default:a(()=>[_(h(c.row.name),1)]),_:2},1032,["onClick"])]),_:1}),o(y,{prop:"tagCount",label:"Tag Count",width:"120",align:"center"}),o(y,{prop:"createdAt",label:"Created",width:"180"},{default:a(c=>[_(h(g(ee)(c.row.createdAt)),1)]),_:1}),o(y,{label:"Actions",width:"120"},{default:a(c=>[o(A,{type:"danger",size:"small",onClick:S=>v(c.row.name)},{default:a(()=>[o(R,null,{default:a(()=>[o(g(K))]),_:1}),l[1]||(l[1]=_(" Delete ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,t.value]])]),_:1},8,["loading","empty","items"])}}},be=D(fe,[["__scopeId","data-v-19a6bc1a"]]);export{be as default};
