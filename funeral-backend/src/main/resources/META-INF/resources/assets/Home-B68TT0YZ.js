import{r as B,c as u,o as s,a as m,b as p,d as a,e as f,f as z,w as o,t as g,g as C,E as I,h as P,i as H,j as T,u as E,k as U,l as x,_ as V,F as M,m as j,n as q,v as O,p as W,q as G,s as _,x as J,y as K,z as Q,A as X,B as A,C as k}from"./index-C9i3Hfag.js";/* empty css                   *//* empty css                        *//* empty css                    */import{u as Y}from"./useAuthCheck-zMZqVkw1.js";import{_ as $}from"./el-input-BtvPs5Ei.js";/* empty css                 */const Z=e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleString()}catch{return(e==null?void 0:e.toString())||"Unknown"}},ee={class:"page-container"},te={key:0,class:"page-header"},oe={key:0,class:"header-actions"},ae={class:"page-content"},ne={class:"card-header"},se={class:"card-title"},le={key:0,class:"loading-container"},re={key:1,class:"page-footer"},ie={key:0,class:"about-button-container"},de={__name:"CommonPageLayout",props:{title:{type:String,default:""},showHeader:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},cardTitle:{type:String,default:""},cardBodyStyle:{type:Object,default:()=>({padding:"20px"})},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Loading..."},empty:{type:Boolean,default:!1},emptyText:{type:String,default:"No data found"},emptyImageSize:{type:Number,default:200},items:{type:Array,default:()=>[]},showFooter:{type:Boolean,default:!1},showAboutButton:{type:Boolean,default:!1}},setup(e){const r=B(null),d=()=>{var t,i;(i=(t=r.value)==null?void 0:t.open)==null||i.call(t)};return(t,i)=>{const h=I,w=P,v=H,b=T,n=x;return s(),u(M,null,[m("div",ee,[e.showHeader?(s(),u("div",te,[f(t.$slots,"header",{},()=>[m("h1",null,g(e.title),1),e.showActions?(s(),u("div",oe,[f(t.$slots,"actions",{},void 0,!0)])):p("",!0)],!0)])):p("",!0),m("div",ae,[a(v,{class:"content-card","body-style":e.cardBodyStyle},z({default:o(()=>[e.loading?(s(),u("div",le,[a(h,{text:e.loadingText},null,8,["text"])])):!e.loading&&(e.empty||e.items.length===0)?(s(),C(w,{key:1,description:e.emptyText,"image-size":e.emptyImageSize},{default:o(()=>[f(t.$slots,"empty",{},void 0,!0)]),_:3},8,["description","image-size"])):f(t.$slots,"default",{key:2},void 0,!0)]),_:2},[e.cardTitle?{name:"header",fn:o(()=>[m("div",ne,[m("span",se,g(e.cardTitle),1),f(t.$slots,"card-actions",{},void 0,!0)])]),key:"0"}:void 0]),1032,["body-style"])]),e.showFooter?(s(),u("div",re,[f(t.$slots,"footer",{},void 0,!0)])):p("",!0)]),e.showAboutButton?(s(),u("div",ie,[a(n,{type:"info",plain:"",circle:"",onClick:d,title:"About FUNERAL"},{default:o(()=>[a(b,null,{default:o(()=>[a(E(U))]),_:1})]),_:1})])):p("",!0),a(V,{ref_key:"aboutDialogRef",ref:r},null,512)],64)}}},ce=$(de,[["__scopeId","data-v-23fe8f21"]]),ue={__name:"Home",setup(e){const r=Q(),d=B([]),t=B(!1),i=async()=>{t.value=!0;try{const n=await A.getRepositories();d.value=n||[],console.log("Repositories data:",n)}catch(n){k.error("Failed to fetch repositories"),console.error("Error fetching repositories:",n)}finally{t.value=!1}},h=()=>{i()},w=n=>{const l=encodeURIComponent(n);r.push(`/repository/${l}`)},v=async n=>{try{await X.confirm(`Are you sure you want to delete repository "${n}"?`,"Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning",confirmButtonClass:"el-button--danger"}),t.value=!0,await A.deleteRepository(n),k.success("Repository deleted successfully"),await i()}catch(l){l!=="cancel"&&k.error("Failed to delete repository")}finally{t.value=!1}},{initPage:b}=Y(r,i,{loading:t});return j(()=>{b()}),(n,l)=>{const N=T,R=x,D=G,y=J,L=W,F=O;return s(),C(ce,{title:"Repositories",loading:t.value,empty:d.value.length===0,"empty-text":"No repositories found",items:d.value,"show-about-button":!1},{actions:o(()=>[a(R,{type:"primary",onClick:h},{default:o(()=>[a(N,null,{default:o(()=>[a(E(K))]),_:1}),l[0]||(l[0]=_(" Refresh ",-1))]),_:1})]),default:o(()=>[q((s(),C(L,{data:d.value,style:{width:"100%"},border:""},{default:o(()=>[a(y,{prop:"name",label:"Name",width:"300"},{default:o(c=>[a(D,{type:"primary",onClick:S=>w(c.row.name)},{default:o(()=>[_(g(c.row.name),1)]),_:2},1032,["onClick"])]),_:1}),a(y,{prop:"tagCount",label:"Tag Count",width:"120",align:"center"}),a(y,{prop:"createdAt",label:"Created",width:"180"},{default:o(c=>[_(g(E(Z)(c.row.createdAt)),1)]),_:1}),a(y,{label:"Actions",width:"120"},{default:o(c=>[a(R,{type:"danger",size:"small",onClick:S=>v(c.row.name)},{default:o(()=>[...l[1]||(l[1]=[_(" Delete ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,t.value]])]),_:1},8,["loading","empty","items"])}}},we=$(ue,[["__scopeId","data-v-70254e40"]]);export{we as default};
