import{aa as c,C as r}from"./index-C9i3Hfag.js";const o=e=>{const t=c();return{checkAuth:async()=>t.isAuthenticated?!0:(await t.checkAuthConfig(),!t.isAuthenticated&&t.authEnabled!==!1?(r.warning("Please login to access the registry"),e.push("/login"),!1):!0)}},l=()=>{const e=c();return{checkAdmin:async()=>{if(e.authEnabled===null&&!e.checkingConfig)await e.checkAuthConfig();else if(e.checkingConfig)for(;e.checkingConfig;)await new Promise(n=>setTimeout(n,50));return e.isAdmin}}},f=(e,t,n={})=>{const{checkAuth:a}=o(e),{loading:i}=n;return{initPage:async()=>{if(!await a()){i&&(i.value=!1);return}if(t)try{await t()}catch(s){console.error("Failed to fetch page data:",s)}}}};export{l as a,f as u};
