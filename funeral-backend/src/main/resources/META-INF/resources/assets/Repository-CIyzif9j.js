import{r as f,y as M,o as A,c as h,a as m,b as l,d as x,e as V,f as o,t as p,g as a,h as c,E as P,u as v,z as S,j as G,F as L,A as j,m as k,n as _,p as q,B as H,C as K,D as N,G as J,H as O,x as Q,q as W}from"./index-B7TKjTeB.js";/* empty css                 *//* empty css                */import{_ as X}from"./_plugin-vue_export-helper-sTCA9qUK.js";/* empty css                */const Y={class:"repository-container"},Z={class:"page-header"},z={class:"card-header"},ee={class:"tag-name"},te={class:"header-actions"},oe={class:"tag-details"},ae={class:"detail-item"},ne={class:"detail-item"},se={class:"pull-command"},le={__name:"Repository",setup(re){const C=M(),B=q(),u=f(decodeURIComponent(C.params.name)),i=f([]),y=f(!1),g=f(null),$=async()=>{y.value=!0;try{const e=await k.getRepositoryTags(u.value);if(e.tags){const t=await Promise.allSettled(e.tags.map(async n=>{try{const r=await k.getManifestInfo(u.value,n);return{name:n,digest:r.digest||"Unknown",size:r.contentLength||"Unknown",created:r.createdAt||"Unknown"}}catch{return{name:n,digest:"Unknown",size:"Unknown",created:"Unknown"}}}));i.value=t.filter(n=>n.status==="fulfilled").map(n=>n.value)}else i.value=[]}catch(e){_.error("Failed to fetch repository tags"),console.error("Error fetching repository tags:",e)}finally{y.value=!1}},w=e=>`docker pull ${window.location.hostname}:${window.location.port||80}/${u.value}:${e.name}`,T=async e=>{try{await navigator.clipboard.writeText(e),_.success("Copied to clipboard")}catch{_.error("Failed to copy to clipboard")}},E=e=>e==="Unknown"?e:e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(2)} KB`:e<1024*1024*1024?`${(e/(1024*1024)).toFixed(2)} MB`:`${(e/(1024*1024*1024)).toFixed(2)} GB`,b=async e=>{try{await W.confirm(`Are you sure you want to delete tag "${e}"?`,"Delete Tag",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}),g.value=e,await k.deleteTag(u.value,e),_.success(`Tag "${e}" deleted successfully`),i.value=i.value.filter(t=>t.name!==e)}catch(t){t!=="cancel"&&_.error(`Failed to delete tag "${e}": ${t.message}`)}finally{g.value=null}},U=()=>{B.back()};return A(()=>{$()}),(e,t)=>{const n=P,r=G,d=H,D=K,F=O,R=Q;return m(),h("div",Y,[l("div",Z,[l("h1",null,p(u.value),1),o(r,{onClick:U},{default:a(()=>[o(n,null,{default:a(()=>[o(v(S))]),_:1}),t[0]||(t[0]=c(" Back ",-1))]),_:1})]),(m(!0),h(L,null,j(i.value,s=>(m(),x(F,{class:"tag-card",key:s.name},{header:a(()=>[l("div",z,[l("span",ee,p(s.name),1),l("div",te,[o(d,{type:"info",size:"small"},{default:a(()=>[c(p(E(s.size)),1)]),_:2},1024),o(r,{type:"danger",size:"small",onClick:I=>b(s.name),loading:g.value===s.name},{default:a(()=>[o(n,null,{default:a(()=>[o(v(J))]),_:1}),t[1]||(t[1]=c(" Delete ",-1))]),_:1},8,["onClick","loading"])])])]),default:a(()=>[l("div",oe,[l("div",ae,[o(d,{type:"info"},{default:a(()=>[...t[2]||(t[2]=[c("Created:",-1)])]),_:1}),o(d,null,{default:a(()=>[c(p(s.created||"Unknown"),1)]),_:2},1024)]),l("div",ne,[o(d,{type:"info"},{default:a(()=>[...t[3]||(t[3]=[c("Digest:",-1)])]),_:1}),o(d,{class:"digest-text"},{default:a(()=>[c(p(s.digest),1)]),_:2},1024)]),l("div",se,[o(d,{type:"info"},{default:a(()=>[...t[4]||(t[4]=[c("Pull Command:",-1)])]),_:1}),o(D,{"model-value":w(s),readonly:"",class:"command-input"},{append:a(()=>[o(r,{onClick:I=>T(w(s))},{default:a(()=>[o(n,null,{default:a(()=>[o(v(N))]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["model-value"])])])]),_:2},1024))),128)),!y.value&&i.value.length===0?(m(),x(R,{key:0,description:"No tags found"})):V("",!0)])}}},_e=X(le,[["__scopeId","data-v-97d145ab"]]);export{_e as default};
