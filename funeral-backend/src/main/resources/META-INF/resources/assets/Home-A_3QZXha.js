import{r as C,c as m,o as l,a as u,b as a,d as b,e as f,f as z,w as o,t as _,g as B,E as I,h as P,i as H,j as x,u as E,k as U,l as A,_ as V,F as M,m as j,n as q,v as O,p as W,q as G,s as y,x as J,y as K,z as Q,A as X,B as T,C as k}from"./index-UvKzSenW.js";/* empty css                   *//* empty css                        *//* empty css                    */import{u as Y}from"./useAuthCheck-BbnSiR93.js";import{_ as $}from"./el-input-BtvPs5Ei.js";/* empty css                 */const Z=e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleString()}catch{return(e==null?void 0:e.toString())||"Unknown"}},ee={class:"page-container"},te={key:0,class:"page-header"},oe={key:0,class:"header-actions"},ae={class:"page-content"},ne={class:"card-header"},se={class:"card-title"},le={key:0,class:"loading-container"},re={key:1,class:"page-footer"},ie={class:"about-button-container"},ce={__name:"CommonPageLayout",props:{title:{type:String,default:""},showHeader:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},cardTitle:{type:String,default:""},cardBodyStyle:{type:Object,default:()=>({padding:"20px"})},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Loading..."},empty:{type:Boolean,default:!1},emptyText:{type:String,default:"No data found"},emptyImageSize:{type:Number,default:200},items:{type:Array,default:()=>[]},showFooter:{type:Boolean,default:!1}},setup(e){const r=C(null),c=()=>{var t,i;(i=(t=r.value)==null?void 0:t.open)==null||i.call(t)};return(t,i)=>{const g=I,h=P,v=H,w=x,n=A;return l(),m(M,null,[u("div",ee,[e.showHeader?(l(),m("div",te,[f(t.$slots,"header",{},()=>[u("h1",null,_(e.title),1),e.showActions?(l(),m("div",oe,[f(t.$slots,"actions",{},void 0,!0)])):b("",!0)],!0)])):b("",!0),u("div",ae,[a(v,{class:"content-card","body-style":e.cardBodyStyle},z({default:o(()=>[e.loading?(l(),m("div",le,[a(g,{text:e.loadingText},null,8,["text"])])):!e.loading&&(e.empty||e.items.length===0)?(l(),B(h,{key:1,description:e.emptyText,"image-size":e.emptyImageSize},{default:o(()=>[f(t.$slots,"empty",{},void 0,!0)]),_:3},8,["description","image-size"])):f(t.$slots,"default",{key:2},void 0,!0)]),_:2},[e.cardTitle?{name:"header",fn:o(()=>[u("div",ne,[u("span",se,_(e.cardTitle),1),f(t.$slots,"card-actions",{},void 0,!0)])]),key:"0"}:void 0]),1032,["body-style"])]),e.showFooter?(l(),m("div",re,[f(t.$slots,"footer",{},void 0,!0)])):b("",!0)]),u("div",ie,[a(n,{type:"info",plain:"",circle:"",onClick:c,title:"About FUNERAL"},{default:o(()=>[a(w,null,{default:o(()=>[a(E(U))]),_:1})]),_:1})]),a(V,{ref_key:"aboutDialogRef",ref:r},null,512)],64)}}},de=$(ce,[["__scopeId","data-v-7deec070"]]),ue={__name:"Home",setup(e){const r=Q(),c=C([]),t=C(!1),i=async()=>{t.value=!0;try{const n=await T.getRepositories();c.value=n||[],console.log("Repositories data:",n)}catch(n){k.error("Failed to fetch repositories"),console.error("Error fetching repositories:",n)}finally{t.value=!1}},g=()=>{i()},h=n=>{const s=encodeURIComponent(n);r.push(`/repository/${s}`)},v=async n=>{try{await X.confirm(`Are you sure you want to delete repository "${n}"?`,"Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning",confirmButtonClass:"el-button--danger"}),t.value=!0,await T.deleteRepository(n),k.success("Repository deleted successfully"),await i()}catch(s){s!=="cancel"&&k.error("Failed to delete repository")}finally{t.value=!1}},{initPage:w}=Y(r,i,{loading:t});return j(()=>{w()}),(n,s)=>{const N=x,R=A,D=G,p=J,L=W,F=O;return l(),B(de,{title:"Repositories",loading:t.value,empty:c.value.length===0,"empty-text":"No repositories found",items:c.value},{actions:o(()=>[a(R,{type:"primary",onClick:g},{default:o(()=>[a(N,null,{default:o(()=>[a(E(K))]),_:1}),s[0]||(s[0]=y(" Refresh ",-1))]),_:1})]),default:o(()=>[q((l(),B(L,{data:c.value,style:{width:"100%"},border:""},{default:o(()=>[a(p,{prop:"name",label:"Name",width:"300"},{default:o(d=>[a(D,{type:"primary",onClick:S=>h(d.row.name)},{default:o(()=>[y(_(d.row.name),1)]),_:2},1032,["onClick"])]),_:1}),a(p,{prop:"tagCount",label:"Tag Count",width:"120",align:"center"}),a(p,{prop:"createdAt",label:"Created",width:"180"},{default:o(d=>[y(_(E(Z)(d.row.createdAt)),1)]),_:1}),a(p,{label:"Actions",width:"120"},{default:o(d=>[a(R,{type:"danger",size:"small",onClick:S=>v(d.row.name)},{default:o(()=>[...s[1]||(s[1]=[y(" Delete ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,t.value]])]),_:1},8,["loading","empty","items"])}}},ve=$(ue,[["__scopeId","data-v-e85fa385"]]);export{ve as default};
