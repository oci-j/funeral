import{r as _,o as N,c as T,a as d,b as m,w as A,d as f,e as V,f as o,g as a,h as l,E as $,u as I,i as L,j as M,v as F,k as H,t as y,l as U,m as h,n as p,p as j,q,s as z,x as W}from"./index-BKVBmhn8.js";/* empty css                   *//* empty css                 *//* empty css               *//* empty css                    */import{_ as G}from"./_plugin-vue_export-helper-sTCA9qUK.js";const J={class:"home-container"},K={class:"page-header"},O={__name:"Home",setup(P){const w=j(),i=_([]),r=_(!1),c=async()=>{r.value=!0;try{const e=await h.getRepositories();i.value=e||[],console.log("Repositories data:",e)}catch(e){p.error("Failed to fetch repositories"),console.error("Error fetching repositories:",e)}finally{r.value=!1}},g=()=>{c()},v=e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleString()}catch{return e}},C=e=>{const t=encodeURIComponent(e);w.push(`/repository/${t}`)},k=async e=>{try{await q.confirm(`Are you sure you want to delete repository "${e}"?`,"Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning",confirmButtonClass:"el-button--danger"}),r.value=!0,await h.deleteRepository(e),p.success("Repository deleted successfully"),await c()}catch(t){t!=="cancel"&&p.error("Failed to delete repository")}finally{r.value=!1}};return N(()=>{c()}),(e,t)=>{const b=$,u=M,E=H,n=U,R=z,x=W,B=F;return d(),T("div",J,[m("div",K,[t[1]||(t[1]=m("h1",null,"Repositories",-1)),o(u,{type:"primary",onClick:g},{default:a(()=>[o(b,null,{default:a(()=>[o(I(L))]),_:1}),t[0]||(t[0]=l(" Refresh ",-1))]),_:1})]),A((d(),f(R,{data:i.value,style:{width:"100%"},border:""},{default:a(()=>[o(n,{prop:"name",label:"Name",width:"300"},{default:a(s=>[o(E,{type:"primary",onClick:D=>C(s.row.name)},{default:a(()=>[l(y(s.row.name),1)]),_:2},1032,["onClick"])]),_:1}),o(n,{prop:"tagCount",label:"Tag Count",width:"120",align:"center"}),o(n,{prop:"createdAt",label:"Created",width:"180"},{default:a(s=>[l(y(v(s.row.createdAt)),1)]),_:1}),o(n,{label:"Actions",width:"120"},{default:a(s=>[o(u,{type:"danger",size:"small",onClick:D=>k(s.row.name)},{default:a(()=>[...t[2]||(t[2]=[l(" Delete ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,r.value]]),!r.value&&i.value.length===0?(d(),f(x,{key:0,description:"No repositories found"})):V("",!0)])}}},te=G(O,[["__scopeId","data-v-a7037589"]]);export{te as default};
